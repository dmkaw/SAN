<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="../index.xhtml">

            <ui:define name="content">
                <div id="top_content">
                        Add new registry union
                </div>
                <div id="right_content">    
                    <h:form id="addEditRegistryUnion" class="right_content_">
                        <p:inputText value="#{registryUnionManagedBean.id}" type="hidden" />
                        <table>
                            <tr>
                                <td>
                                    <p:outputLabel for="regUnionNumber_input" value="Registry union number" />
                                </td>
                                <td>
                                    <p:inputText id="regUnionNumber_input" value="#{registryUnionManagedBean.landRegisterNumber}" required="true"
                                                 validatorMessage="Enter registry union numner in format LLNL/NNNNNNNN/N (L - big letter, N - number)">
                                        <f:validateRegex pattern="[A-Z]{2}\d[A-Z]/\d{8}/\d" />
                                    </p:inputText>
                                </td>
                                <td>
                                    <p:message for="regUnionNumber_input"/><br/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p:outputLabel for="ll_manyMenu" value="Available land lots" />
                                </td>
                                <td>
                                    <p:selectManyMenu id="ll_manyMenu" value="#{registryUnionManagedBean.chosenLandLots}" converter="#{LandLotConverter}">
                                        <f:selectItems value="#{registryUnionManagedBean.availableLandLots}" var="landLot"
                                                       itemValue="#{landLot}" itemLabel="#{landLot.landLotId} (#{landLot.cadastralMunicipality.name})" />
                                    </p:selectManyMenu>
                                </td>
                                <td>
                                    <p:message id="ru_message" for="ll_manyMenu"/><br/>
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <div class="right_content_button">
                                        <p:commandButton action="#{registryUnionManagedBean.addEditRegistryUnion}" value="Save" update="@form" />
                                    </div>
                                </td>
                                <td></td>
                            </tr>
                        </table> 
                        <p:messages id="info" showDetail="true" closable="true" />
                    </h:form>
                </div>
            </ui:define>

        </ui:composition>

    </body>
</html>
